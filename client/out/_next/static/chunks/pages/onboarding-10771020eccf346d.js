(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[411],{9089:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/onboarding",function(){return a(165)}])},9352:function(e,t,a){"use strict";a.d(t,{Z:function(){return x}});var n=a(5893),s=a(7294),r=a(5675),c=a.n(r),l=a(9583),i=a(9413),o=a(6223),u=a(155),d=function(e){let{setImage:t,hidePhotoLibrary:a}=e;return(0,n.jsx)("div",{className:"fixed top-0 left-0 max-h-[100vh] max-w-[100vw] w-full h-full flex justify-center items-center",children:(0,n.jsxs)("div",{className:"h-max w-max bg-gray-900 gap-6 rounded-lg p-4",children:[(0,n.jsx)("div",{className:"pt-2 pe-2 cursor-pointer flex items-end justify-end",onClick:()=>a(!1),children:(0,n.jsx)(u.bjh,{className:"h-10 w-10 cursor-pointer"})}),(0,n.jsx)("div",{className:"grid grid-cols-3 justify-center items-center gap-16 p-20 w-full",children:["/avatars/1.png","/avatars/2.png","/avatars/3.png","/avatars/4.png","/avatars/5.png","/avatars/6.png","/avatars/7.png","/avatars/8.png","/avatars/9.png"].map((e,s)=>(0,n.jsx)("div",{onClick:()=>{t(e),a(!1)},children:(0,n.jsx)("div",{className:" h-24 w-24 cursor-pointer relative",children:(0,n.jsx)(c(),{src:e,alt:"avatar",fill:!0})})},s))})]})})},f=function(e){let{hide:t,setImage:a}=e,r=(0,s.useRef)(null);return(0,s.useEffect)(()=>{let e;let t=async()=>{e=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1}),r.current.srcObject=e};return t(),()=>{var t;null===(t=e)||void 0===t||t.getTracks().forEach(e=>e.stop())}},[]),(0,n.jsx)("div",{className:"absolute h-4/6 w-2/6 top-1/4 left-1/3 bg-gray-900 gap-3 rounded-lg flex items-center justify-center",children:(0,n.jsxs)("div",{className:"flex flex-col gap-4 w-full items-center justify-center",children:[(0,n.jsx)("div",{className:"pt-2 pr-2 cursor-pointer flex items-end justify-end",onClick:()=>t(!1),children:(0,n.jsx)(u.bjh,{className:"h-10 w-10 cursor-pointer"})}),(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsx)("video",{id:"video",width:"400",autoPlay:!0,ref:r})}),(0,n.jsx)("button",{className:"h-16 w-16 bg-white rounded-full cursor-pointer border-8 border-teal-light p-2 mb-10",onClick:()=>{let e=document.createElement("canvas");e.getContext("2d").drawImage(r.current,0,0,300,150),a(e.toDataURL("image/jpeg")),t(!1)}})]})})},x=function(e){let{type:t,image:a,setImage:r}=e,[u,x]=(0,s.useState)(!1),[p,m]=(0,s.useState)(!1),[h,g]=(0,s.useState)({x:0,y:0}),[v,j]=(0,s.useState)(!1),[b,N]=(0,s.useState)(!1),[y,w]=(0,s.useState)(!1),k=e=>{e.preventDefault(),g({x:e.pageX,y:e.pageY}),m(!0)};(0,s.useEffect)(()=>{if(v){let e=document.getElementById("photo-picker");e.click(),document.body.onfocus=e=>{setTimeout(()=>{j(!1)},1e3)}}},[v]);let E=async e=>{let t=e.target.files[0],a=new FileReader,n=document.createElement("img");a.onload=function(e){n.src=e.target.result,n.setAttribute("data-src",e.target.result)},a.readAsDataURL(t),setTimeout(()=>{r(n.src)},100)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex items-center justify-center",children:["sm"===t&&(0,n.jsx)("div",{className:"relative h-10 w-10",children:(0,n.jsx)(c(),{src:a,alt:"avatar",className:"rounded-full",fill:!0})}),"lg"===t&&(0,n.jsx)("div",{className:"relative h-14 w-14",children:(0,n.jsx)(c(),{src:a,alt:"avatar",className:"rounded-full",fill:!0})}),"xl"===t&&(0,n.jsxs)("div",{className:"relative cursor-pointer z-0",onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),children:[(0,n.jsxs)("div",{className:"z-10 bg-photopicker-overlay-background h-60 w-60 absolute top-0 left-0 flex items-center rounded-full justify-center flex-col text-center gap-2 ".concat(u?"visible":"hidden"),onClick:e=>k(e),id:"context-opener",children:[(0,n.jsx)(l.Dmm,{className:"text-2xl",id:"context-opener",onClick:e=>k(e)}),(0,n.jsxs)("span",{onClick:e=>k(e),id:"context-opener",children:["Change ",(0,n.jsx)("br",{})," Profile ",(0,n.jsx)("br",{})," Photo"]})]}),(0,n.jsx)("div",{className:" h-60 w-60 ",children:(0,n.jsx)(c(),{src:a,alt:"avatar",className:"rounded-full",fill:!0})})]})]}),p&&(0,n.jsx)(i.Z,{options:[{name:"Take photo",callback:()=>{w(!0)}},{name:"Choose from library",callback:()=>{N(!0)}},{name:"Upload photo",callback:()=>{j(!0)}},{name:"Remove photo",callback:()=>{r("/default_avatar.png")}}],coordinates:h,contextMenu:p,setContextMenu:m}),y&&(0,n.jsx)(f,{setImage:r,hide:w}),b&&(0,n.jsx)(d,{setImage:r,hidePhotoLibrary:N}),v&&(0,n.jsx)(o.Z,{onChange:E})]})}},9413:function(e,t,a){"use strict";var n=a(5893),s=a(7294);t.Z=function(e){let{options:t,coordinates:a,contextMenu:r,setContextMenu:c}=e,l=(0,s.useRef)(null);(0,s.useEffect)(()=>{let e=e=>{"context-opener"!==e.target.id&&l.current&&!l.current.contains(e.target)&&c(!1)};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}},[]);let i=(e,t)=>{e.stopPropagation(),c(!1),t()};return(0,n.jsx)("div",{className:"bg-dropdown-background fixed py-2 z-[100]  shadow-xl",style:{top:a.y,left:a.x},ref:l,children:(0,n.jsx)("ul",{children:t.map(e=>{let{name:t,callback:a}=e;return(0,n.jsx)("li",{onClick:e=>i(e,a),className:"px-5 py-5 cursor-pointer hover:bg-background-default-hover z-[9999]",children:(0,n.jsx)("span",{className:"text-white",children:t})},t)})})})}},6223:function(e,t,a){"use strict";var n=a(5893);a(7294);var s=a(3935);t.Z=function(e){let{onChange:t}=e,a=(0,n.jsx)("input",{type:"file",id:"photo-picker",onChange:t});return s.createPortal(a,document.getElementById("photo-picker-element"))}},165:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return p}});var n=a(5893),s=a(7294),r=a(5675),c=a.n(r),l=a(1701),i=function(e){let{name:t,state:a,setState:s,label:r=!1}=e;return(0,n.jsxs)("div",{className:"flex gap-1 flex-col",children:[r&&(0,n.jsx)("label",{htmlFor:t,className:"text-teal-light text-lg px-1",children:t}),(0,n.jsx)("div",{children:(0,n.jsx)("input",{type:"text",name:t,value:a,onChange:e=>s(e.target.value),className:"bg-input-background text-start focus:outline-none text-white h-10 rounded-lg px-5 py-4 w-full"})})]})},o=a(9352),u=a(58),d=a(1163),f=a(6154),x=a(9149),p=function(){let e=(0,d.useRouter)(),[{userInfo:t,newUser:a},r]=(0,l.C4)(),[p,m]=(0,s.useState)((null==t?void 0:t.name)||""),[h,g]=(0,s.useState)(""),[v,j]=(0,s.useState)("/default_avatar.png");(0,s.useEffect)(()=>{a||(null==t?void 0:t.email)?!a&&(null==t?void 0:t.email)&&e.push("/"):e.push("/login")},[a,t,e]);let b=async()=>{if(N()){let a=t.email;try{let{data:t}=await f.Z.post(u.p0,{email:a,name:p,about:h,image:v});t.status&&(r({type:x.J.SET_NEW_USER,newUser:!1}),r({type:x.J.SET_USER_INFO,userInfo:{id:t.user.id,name:p,email:a,profileImage:v,status:h}}),e.push("/"))}catch(e){console.log(e)}}},N=()=>!(p.length<3);return(0,n.jsxs)("div",{className:"bg-panel-header-background h-screen w-screen text-white flex flex-col items-center",children:[(0,n.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,n.jsx)(c(),{src:"/whatsapp.gif",alt:"whatsapp",height:300,width:300}),(0,n.jsx)("span",{className:"text-7xl",children:"Whatsapp"})]}),(0,n.jsx)("h2",{className:"text-2xl",children:"Create your profile"}),(0,n.jsxs)("div",{className:"flex gap-6 mt-6",children:[(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center mt-5 gap-6",children:[(0,n.jsx)(i,{name:"Display Name",state:p,setState:m,label:!0}),(0,n.jsx)(i,{name:"About",state:h,setState:g,label:!0}),(0,n.jsx)("div",{className:"flex items-center justify-center",children:(0,n.jsx)("button",{onClick:b,className:"flex items-center justify-center gap-7 bg-search-input-container-background p-5 rounded-lg",children:"Create Profile"})})]}),(0,n.jsx)("div",{children:(0,n.jsx)(o.Z,{type:"xl",image:v,setImage:j})})]})]})}},58:function(e,t,a){"use strict";a.d(t,{Hj:function(){return f},M5:function(){return n},MZ:function(){return o},OZ:function(){return x},Ru:function(){return d},To:function(){return i},co:function(){return u},gS:function(){return c},p0:function(){return l},yQ:function(){return p}});let n="http://localhost:3005",s="".concat(n,"/api/auth"),r="".concat(n,"/api/messages"),c="".concat(s,"/check-user"),l="".concat(s,"/onboard-user"),i="".concat(s,"/get-contacts"),o="".concat(s,"/generate-token"),u="".concat(r,"/add-message"),d="".concat(r,"/get-messages"),f="".concat(r,"/add-image-message"),x="".concat(r,"/add-audio-message"),p="".concat(r,"/get-initial-contacts")},1163:function(e,t,a){e.exports=a(6885)}},function(e){e.O(0,[445,260,354,774,888,179],function(){return e(e.s=9089)}),_N_E=e.O()}]);