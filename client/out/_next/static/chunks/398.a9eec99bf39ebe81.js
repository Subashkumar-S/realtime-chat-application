"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[398],{2398:function(e,t,r){r.r(t);var s=r(5893),n=r(1701),a=r(7294),c=r(9352),u=r(9583),i=r(157),l=r(2177),o=r(1796),d=r.n(o),f=r(58);t.default=function(e){var t;let{message:r}=e,[{currentChatUser:o,userInfo:p}]=(0,n.C4)(),[x,m]=(0,a.useState)(null),[g,h]=(0,a.useState)(!1),[v,j]=(0,a.useState)(0),[b,N]=(0,a.useState)(0),S=(0,a.useRef)(null),k=(0,a.useRef)(null);return(0,a.useEffect)(()=>(null===k.current&&(k.current=d().create({container:S.current,waveColor:"#ccc",progressColor:"#4a9eff",cursorColor:"#7ae3c3",barWidth:2,height:30,responsive:!0}),k.current.on("finish",()=>{h(!1)})),()=>{k.current.destroy()}),[]),(0,a.useEffect)(()=>{let e="".concat(f.M5,"/").concat(r.message),t=new Audio(e);m(t),k.current.load(e),k.current.on("ready",()=>{N(k.current.getDuration())})},[r.message]),(0,a.useEffect)(()=>{if(x){let e=()=>{j(x.currentTime)};return x.addEventListener("timeUpdate",e),()=>{x.removeEventListener("timeupdate",e)}}},[x]),(0,s.jsxs)("div",{className:"flex items-center gap-5 text-white px-4 py-4 text-sm rounded-md ".concat(r.senderId===o.id?"bg-incoming-background":"bg-outgoing-background"),children:[(0,s.jsx)("div",{children:(0,s.jsx)(c.Z,{type:"lg",image:null==o?void 0:o.profilePicture})}),(0,s.jsx)("div",{className:"cursor-pointer text-xl",children:g?(0,s.jsx)(u.JuG,{onClick:()=>{k.current.stop(),x.pause(),h(!1)}}):(0,s.jsx)(u.gmG,{onClick:()=>{x&&(k.current.stop(),k.current.play(),x.play(),h(!0))}})}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"w-60",ref:S}),(0,s.jsxs)("div",{className:"text-bubble-meta text-[11px] pt-1 flex justify-between absolute bottom-[-22px] w-full ",children:[(0,s.jsx)("span",{children:isNaN(t=g?v:b)?"00:00":"".concat(Math.floor(t/60).toString().padStart(2,"0"),":").concat(Math.floor(t%60).toString().padStart(2,"0"))}),(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsx)("span",{children:(0,i.O)(r.createdAt)}),r.senderId===p.id&&(0,s.jsx)(l.Z,{messageStatus:r.messageStatus})]})]})]})]})}}}]);